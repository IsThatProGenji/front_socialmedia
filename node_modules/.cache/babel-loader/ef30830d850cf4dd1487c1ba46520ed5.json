{"ast":null,"code":"import _slicedToArray from\"E:/The Reactor/SocialMediaBasdat/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from'react';import'./Upload.css';import Axios from'axios';import{useHistory}from'react-router-dom';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Upload(){var _useState=useState(''),_useState2=_slicedToArray(_useState,2),title=_useState2[0],setTitle=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),description=_useState4[0],setDescription=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),image=_useState6[0],setImage=_useState6[1];var history=useHistory();var upload=function upload(){var formData=new FormData();formData.append(\"file\",image[0]);formData.append(\"upload_preset\",\"vgm4xsbh\");Axios.post('https://api.cloudinary.com/v1_1/dlhqyhr1r/image/upload',formData).then(function(response){var fileName=response.data.public_id;Axios.post(\"http://localhost:3001/upload\",{title:title,description:description,image:fileName,author:localStorage.getItem(\"username\")}).then(function(){history.push(\"/\");});});};return/*#__PURE__*/_jsx(\"div\",{className:\"box\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"Upload\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Create A Post\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"UploadForm\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Title\",onChange:function onChange(event){setTitle(event.target.value);}}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Description\",onChange:function onChange(event){setDescription(event.target.value);}}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",onChange:function onChange(e){return setImage(e.target.files);}}),/*#__PURE__*/_jsx(\"button\",{onClick:upload,children:\"Upload\"})]})]})});}export default Upload;","map":{"version":3,"sources":["E:/The Reactor/SocialMediaBasdat/client/src/pages/Upload/Upload.js"],"names":["React","useState","Axios","useHistory","Upload","title","setTitle","description","setDescription","image","setImage","history","upload","formData","FormData","append","post","then","response","fileName","data","public_id","author","localStorage","getItem","push","event","target","value","e","files"],"mappings":"8JAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,KAAgC,OAAhC,CACA,MAAO,cAAP,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAASC,UAAT,KAA2B,kBAA3B,C,wFAEA,QAASC,CAAAA,MAAT,EAAkB,eAEYH,QAAQ,CAAC,EAAD,CAFpB,wCAEPI,KAFO,eAEAC,QAFA,8BAGwBL,QAAQ,CAAC,EAAD,CAHhC,yCAGPM,WAHO,eAGMC,cAHN,8BAIYP,QAAQ,CAAC,EAAD,CAJpB,yCAIPQ,KAJO,eAIAC,QAJA,eAMd,GAAIC,CAAAA,OAAO,CAAGR,UAAU,EAAxB,CAEA,GAAMS,CAAAA,MAAM,CAAG,QAATA,CAAAA,MAAS,EAAM,CAEjB,GAAMC,CAAAA,QAAQ,CAAG,GAAIC,CAAAA,QAAJ,EAAjB,CACAD,QAAQ,CAACE,MAAT,CAAgB,MAAhB,CAAwBN,KAAK,CAAC,CAAD,CAA7B,EACAI,QAAQ,CAACE,MAAT,CAAgB,eAAhB,CAAiC,UAAjC,EACAb,KAAK,CAACc,IAAN,CACI,wDADJ,CAC8DH,QAD9D,EACwEI,IADxE,CAC6E,SAACC,QAAD,CAAc,CACnF,GAAMC,CAAAA,QAAQ,CAAGD,QAAQ,CAACE,IAAT,CAAcC,SAA/B,CAEAnB,KAAK,CAACc,IAAN,CACI,8BADJ,CACoC,CAChCX,KAAK,CAAEA,KADyB,CAEhCE,WAAW,CAAEA,WAFmB,CAGhCE,KAAK,CAAEU,QAHyB,CAIhCG,MAAM,CAAEC,YAAY,CAACC,OAAb,CAAqB,UAArB,CAJwB,CADpC,EAMGP,IANH,CAMQ,UAAM,CACVN,OAAO,CAACc,IAAR,CAAa,GAAb,EACH,CARD,EASH,CAbL,EAcH,CAnBD,CAqBA,mBACI,YAAK,SAAS,CAAC,KAAf,uBACI,aAAK,SAAS,CAAC,QAAf,wBACI,qCADJ,cAGI,aAAK,SAAS,CAAC,YAAf,wBACI,cACI,IAAI,CAAC,MADT,CAEI,WAAW,CAAC,OAFhB,CAGI,QAAQ,CAAE,kBAACC,KAAD,CAAW,CACjBpB,QAAQ,CAACoB,KAAK,CAACC,MAAN,CAAaC,KAAd,CAAR,CACH,CALL,EADJ,cAQI,cACI,IAAI,CAAC,MADT,CAEI,WAAW,CAAC,aAFhB,CAGI,QAAQ,CAAE,kBAACF,KAAD,CAAW,CACjBlB,cAAc,CAACkB,KAAK,CAACC,MAAN,CAAaC,KAAd,CAAd,CAEH,CANL,EARJ,cAgBI,cAAO,IAAI,CAAC,MAAZ,CAAmB,QAAQ,CAAE,kBAACC,CAAD,QAAOnB,CAAAA,QAAQ,CAACmB,CAAC,CAACF,MAAF,CAASG,KAAV,CAAf,EAA7B,EAhBJ,cAiBI,eACI,OAAO,CAAElB,MADb,oBAjBJ,GAHJ,GADJ,EADJ,CAgCH,CAED,cAAeR,CAAAA,MAAf","sourcesContent":["import React, { useState } from 'react'\r\nimport './Upload.css'\r\nimport Axios from 'axios'\r\nimport { useHistory } from 'react-router-dom'\r\n\r\nfunction Upload() {\r\n\r\n    const [title, setTitle] = useState('')\r\n    const [description, setDescription] = useState('')\r\n    const [image, setImage] = useState([])\r\n\r\n    let history = useHistory()\r\n\r\n    const upload = () => {\r\n\r\n        const formData = new FormData()\r\n        formData.append(\"file\", image[0])\r\n        formData.append(\"upload_preset\", \"vgm4xsbh\")\r\n        Axios.post(\r\n            'https://api.cloudinary.com/v1_1/dlhqyhr1r/image/upload', formData).then((response) => {\r\n                const fileName = response.data.public_id\r\n\r\n                Axios.post(\r\n                    \"http://localhost:3001/upload\", {\r\n                    title: title,\r\n                    description: description,\r\n                    image: fileName,\r\n                    author: localStorage.getItem(\"username\")\r\n                }).then(() => {\r\n                    history.push(\"/\")\r\n                })\r\n            })\r\n    }\r\n\r\n    return (\r\n        <div className=\"box\">\r\n            <div className=\"Upload\">\r\n                <h1>Create A Post</h1>\r\n\r\n                <div className=\"UploadForm\">\r\n                    <input\r\n                        type=\"text\"\r\n                        placeholder=\"Title\"\r\n                        onChange={(event) => {\r\n                            setTitle(event.target.value)\r\n                        }}\r\n                    />\r\n                    <input\r\n                        type=\"text\"\r\n                        placeholder=\"Description\"\r\n                        onChange={(event) => {\r\n                            setDescription(event.target.value)\r\n\r\n                        }}\r\n                    />\r\n                    <input type=\"file\" onChange={(e) => setImage(e.target.files)} />\r\n                    <button\r\n                        onClick={upload}>\r\n                        Upload\r\n                     </button>\r\n\r\n\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Upload\r\n"]},"metadata":{},"sourceType":"module"}